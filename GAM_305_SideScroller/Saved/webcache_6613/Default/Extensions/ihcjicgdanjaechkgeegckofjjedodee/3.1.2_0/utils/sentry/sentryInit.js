import*as Sentry from"@sentry/browser";import{chrome}from"../polyfill.ts";import{TARGET_BROWSER}from"@/app/scripts/browser-const.js";import{BROWSER_NAME}from"@/app/scripts/app-consts.js";export function sentryInit(e={}){if(TARGET_BROWSER!==BROWSER_NAME.Firefox){console.debug("sentryInit. ENVIRONMENT: ",ENVIRONMENT);let e={},t=!1;try{e=chrome.runtime.getManifest(),t=e.name.includes("Beta")}catch(e){console.warn("sentryInit: Could not get manifest or determine if beta version.",e)}let r={dsn:"https://708a324f1a7ec87a2658346fb4bb7586@o438337.ingest.sentry.io/4506062147551232",tracesSampleRate:t?.01:25e-5,sampleRate:t?.1:.005,replaysSessionSampleRate:0,replaysOnErrorSampleRate:0,enabled:"production"===ENVIRONMENT,release:chrome.runtime.getManifest().version,attachStacktrace:!0,ignoreErrors:["Could not establish connection. Receiving end does not exist","No tab with id:","Failed to fetch","Corruption: block checksum mismatch","QuotaExceededError: Encountered full disk","Non-Error promise rejection captured with value: IO error","FILE_ERROR_NO_SPACE","FILE_ERROR_IO","FILE_ERROR_FAILED","FILE_ERROR_ACCESS_DENIED"]};t&&console.debug(`Sentry - Beta: ${t}, Sample: ${r.sampleRate}, Traces: ${r.tracesSampleRate}`),Sentry.init(r),Sentry.getCurrentScope().setLevel("error")}}